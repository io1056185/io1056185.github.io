/*! vrFirst - v0.0.5 - 2017-12-07 */!function(){var e=function(){var t=[],r=[],n={},s=function(s){if(void 0!==t[s])return t[s].exports;if(n={id:s,filename:s,parent:n,children:[],exports:{},loaded:!1},void 0===r[s])throw new Error("The factory of "+s+" module not found");return t[s]=r[s](e,n.exports,n,"undefined"!=typeof window?window:"undefined"!=typeof global?global:null),t[s].loaded=!0,t[s].parent.children&&t[s].parent.children.push(t[s]),t[s].exports};return s.def=function(e,t){r[e]=t},s}();"undefined"==typeof require&&(require=e),e.def("App/View/Js/app/App.js",function(e,t,r,n){var s=e("jquery"),i=e("App/View/Js/vendors/exoskeleton/exoskeleton.js"),o=e("App/View/Js/app/misc/mediator.js"),a=e("App/View/Js/app/Router.js"),l=e("App/View/Js/app/views/ContactMain.js"),c=e("App/View/Js/app/models/ContactMain.js"),u=e("App/View/Js/app/views/ContactSeed.js"),h=e("App/View/Js/app/models/ContactSeed.js"),d=e("App/View/Js/app/views/ContactGrowth.js"),p=e("App/View/Js/app/models/ContactGrowth.js"),f=e("App/View/Js/app/views/ContactCultivate.js"),m=e("App/View/Js/app/models/ContactCultivate.js"),v=e("App/View/Js/app/views/ContactFlourish.js"),g=e("App/View/Js/app/models/ContactFlourish.js"),y=e("App/View/Js/app/views/Subscribe.js"),b=e("App/View/Js/app/models/Subscribe.js");return s(document).ready(function(){"use strict";o.register("subscribe-view",new y({el:"#f_vrfirst_subscribe",model:new b})),o.register("contact-view",new l({el:"#f_vrfirst_main",model:new c})),o.register("contact-view",new u({el:"#f_vrfirst_seed",model:new h})),o.register("contact-view",new d({el:"#f_vrfirst_growth",model:new p})),o.register("contact-view",new f({el:"#f_vrfirst_cultivate",model:new m})),o.register("contact-view",new v({el:"#f_vrfirst_flourish",model:new g})),a.init().navigate("/",{trigger:!0}),e("App/View/Js/app/misc/custom.js"),i.history.start()}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/misc/mediator.js",function(e,t,r,n){return r.exports=function(){var e={};return{register:function(t,r){return e[t]=r,r},on:function(t,r,n,s){if(!e[t])throw new Error("No instance registered under `"+t+"` key");return e[t].on(r,n,s)},off:function(t,r,n,s){return e[t].off(r,n,s)},trigger:function(t){var r=Array.prototype.slice.call(arguments,1);if(!e[t])throw new Error("No instance registered under `"+t+"` key");return e[t].trigger.apply(e[t],r)}}}(),r}),e.def("App/View/Js/app/Router.js",function(e,t,r,n){var s=e("App/View/Js/vendors/exoskeleton/exoskeleton.js"),i=e("App/View/Js/app/misc/mediator.js");return Router=s.Router.extend({routes:{"/":"invokeDefault",subscribe:"invokeSubscribe"},initialize:function(){},invokeDefault:function(){i.trigger("contact-view","on"),i.trigger("subscribe-view","off")},invokeSubscribe:function(){i.trigger("contact-view","off"),i.trigger("subscribe-view","on")}}),r.exports=function(){var e=null;return{init:function(){return e=new Router,this.getInstance()},getInstance:function(){return e}}}(),r}),e.def("App/View/Js/app/views/ContactMain.js",function(e,t,r,n){var s=e("jquery"),i=(e("underscore"),e("App/View/Js/app/views/FormAbstract.js"));return r.exports=i.extend({_initialize:function(){i.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){i.prototype.bindForm.apply(this)},resetClass:function(){s.each(this.$inputs,function(){s(this).attr("disabled"),s(this).removeClass("valid"),s(this).removeClass("visited")})},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(){t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("has-error"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for reaching out to us. We will get back to you shortly! For another contact request, please <a class='requestContact' href='/#contact' onclick='location.reload()'>click here</a>."),t.$errorMsg.toggleClass("is-hidden",!1),t.$el.find(".form-footer").remove(),t.$submitBtn.attr("disabled","disabled"),t.resetClass(),t.unbindForm()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};console.log("module:views/ContactMain: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/views/ContactSeed.js",function(e,t,r,n){var s=e("jquery"),i=(e("underscore"),e("App/View/Js/app/views/FormAbstract.js"));return r.exports=i.extend({_initialize:function(){i.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){i.prototype.bindForm.apply(this)},resetClass:function(){s.each(this.$inputs,function(){s(this).attr("disabled"),s(this).removeClass("valid"),s(this).removeClass("visited")})},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(){t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("has-error"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for reaching out to us. Let’s plant those seeds of immersion! For another contact request, please <a class='requestContact' href='/programs/seed/#contact' onclick='location.reload()'>click here</a>."),t.$errorMsg.toggleClass("is-hidden",!1),t.$el.find(".form-footer").remove(),t.$submitBtn.attr("disabled","disabled"),t.resetClass(),t.unbindForm()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};s(".has-error").css("color","red"),console.log("module:views/ContactSeed: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/models/ContactMain.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");e("jquery");return r.exports=s.extend({url:"/contact/main",defaults:{name:"",email:"",phone:"",organisation:"",interest:"",location:"",country:"",text:"",formcheckin:"",csrftoken:""},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(void 0===this.defaults.interest||e.interest||r.push({name:"interest",message:"Please select what you are interested in"}),r=this.isCsrfTokenValid(e.csrftoken,r),r=this.isNameValid(e.name,r,!0),r=this.isEmailValid(e.email,r,!0),void 0===this.defaults.country||e.country||r.push({name:"country",message:"Please select your country"}),r=this.isOrganisationValid(e.organisation,r,!0),r.length>0&&r)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/models/ContactSeed.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");e("jquery");return r.exports=s.extend({url:"/contact/seed",defaults:{name:"",email:"",phone:"",organisation:"",text:"",country:"",formcheckin:"",csrftoken:""},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(r=this.isCsrfTokenValid(e.csrftoken,r),r=this.isNameValid(e.name,r,!0),r=this.isEmailValid(e.email,r,!0),void 0===this.defaults.country||e.country||r.push({name:"country",message:"Please select your country"}),r=this.isOrganisationValid(e.organisation,r,!0),r.length>0&&r)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/views/ContactGrowth.js",function(e,t,r,n){var s=e("jquery"),i=(e("underscore"),e("App/View/Js/app/views/FormAbstract.js"));return r.exports=i.extend({_initialize:function(){i.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){i.prototype.bindForm.apply(this)},resetClass:function(){s.each(this.$inputs,function(){s(this).attr("disabled"),s(this).removeClass("valid"),s(this).removeClass("visited")})},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(){t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("has-error"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for reaching out to us. Let’s grow together! For another contact request, please <a class='requestContact' href='/programs/growth/#contact' onclick='location.reload()'>click here</a>."),t.$errorMsg.toggleClass("is-hidden",!1),t.$el.find(".form-footer").remove(),t.$submitBtn.attr("disabled","disabled"),t.resetClass(),t.unbindForm()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};console.log("module:views/ContactGrowth: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/models/ContactGrowth.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");e("jquery");return r.exports=s.extend({url:"/contact/growth",defaults:{name:"",email:"",phone:"",organisation:"",text:"",bundles:"",equipment:"",service:"",country:"",formcheckin:"",csrftoken:""},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(void 0===this.defaults.service||e.service||r.push({name:"service",message:"Please select services which you are interested"}),r=this.isCsrfTokenValid(e.csrftoken,r),r=this.isNameValid(e.name,r,!0),r=this.isEmailValid(e.email,r,!0),void 0===this.defaults.country||e.country||r.push({name:"country",message:"Please select your country"}),r=this.isOrganisationValid(e.organisation,r,!0),r.length>0&&r)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/views/ContactCultivate.js",function(e,t,r,n){var s=e("jquery"),i=(e("underscore"),e("App/View/Js/app/views/FormAbstract.js"));return r.exports=i.extend({_initialize:function(){i.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){i.prototype.bindForm.apply(this)},resetClass:function(){s.each(this.$inputs,function(){s(this).attr("disabled"),s(this).removeClass("valid"),s(this).removeClass("visited")})},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(){t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("has-error"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for reaching out to us. VR glad about your interest! For another contact request, please <a class='requestContact' href='/programs/cultivate/#contact' onclick='location.reload()'>click here</a>."),t.$errorMsg.toggleClass("is-hidden",!1),t.$el.find(".form-footer").remove(),t.$submitBtn.attr("disabled","disabled"),t.resetClass(),t.unbindForm()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};console.log("module:views/ContactCultivate: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/models/ContactCultivate.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");e("jquery");return r.exports=s.extend({url:"/contact/cultivate",defaults:{name:"",email:"",phone:"",organisation:"",text:"",mentor:"",country:"",formcheckin:"",csrftoken:""},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(void 0===this.defaults.mentor||e.mentor||r.push({name:"mentor",message:"Please select a mentor you are interested"}),r=this.isCsrfTokenValid(e.csrftoken,r),r=this.isNameValid(e.name,r,!0),r=this.isEmailValid(e.email,r,!0),void 0===this.defaults.country||e.country||r.push({name:"country",message:"Please select your country"}),r=this.isOrganisationValid(e.organisation,r,!0),r.length>0&&r)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/views/ContactFlourish.js",function(e,t,r,n){var s=e("jquery"),i=(e("underscore"),e("App/View/Js/app/views/FormAbstract.js"));return r.exports=i.extend({_initialize:function(){i.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){i.prototype.bindForm.apply(this)},resetClass:function(){s.each(this.$inputs,function(){s(this).attr("disabled"),s(this).removeClass("valid"),s(this).removeClass("visited")})},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(){t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("has-error"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for reaching out to us. And wanting to preach the word to every creature! For another contact request, please <a class='requestContact' href='/programs/flourish/#contact' onclick='location.reload()'>click here</a>."),t.$errorMsg.toggleClass("is-hidden",!1),t.$el.find(".form-footer").remove(),t.$submitBtn.attr("disabled","disabled"),t.resetClass(),t.unbindForm()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};console.log("module:views/ContactFlourish: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/models/ContactFlourish.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");e("jquery");return r.exports=s.extend({url:"/contact/flourish",defaults:{name:"",email:"",phone:"",organisation:"",text:"",mentor:"",country:"",formcheckin:"",csrftoken:""},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(void 0===this.defaults.mentor||e.mentor||r.push({name:"mentor",message:"Please select a mentor you are interested"}),r=this.isCsrfTokenValid(e.csrftoken,r),r=this.isNameValid(e.name,r,!0),r=this.isEmailValid(e.email,r,!0),void 0===this.defaults.country||e.country||r.push({name:"country",message:"Please select your country"}),r=this.isOrganisationValid(e.organisation,r,!0),r.length>0&&r)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/views/Subscribe.js",function(e,t,r,n){var s=e("App/View/Js/app/views/FormAbstract.js");return r.exports=s.extend({el:"#f_vrfirst_subscribe",initialize:function(){s.prototype._initialize.apply(this),this.renderForm(),this.bindForm()},bindForm:function(){s.prototype.bindForm.apply(this)},resetInput:function(){$.each(this.$inputs,function(){$(this).removeClass("valid"),$(this).removeClass("visited"),$(this).val("")})},toggleSuccessBtn:function(){this.$successBtn.toggleClass("is-hidden")},handleSubmit:function(e){var t=this;e.preventDefault(),this.model.save(this.model.attributes,{success:function(e){arguments[1];t.$errorMsg.removeClass("alert-danger"),t.$errorMsg.addClass("alert-success"),t.$errorMsg.html("Thank you for subscribing"),t.$errorMsg.toggleClass("is-hidden",!1),t.resetInput()},error:function(){var e=arguments[1],r=e.responseJSON&&e.responseJSON.exception.message?e.responseJSON.exception.message:"Internal error!",n={name:"form",message:r};console.log("module:views/Subscribe: server validation error [%s]",r),t.handleModelInvalid(t,[n])}})}}),r}),e.def("App/View/Js/app/models/Subscribe.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractForm.js");return r.exports=s.extend({url:"/user/subscribe",defaults:{email:""},initialize:function(){this.on("change",function(){this.isValid()},this)},validate:function(e,t){var r=t.remoteErrors||[];return!t.validate||(r=this.isEmailValid(e.email,r,!0),r.length>0&&r)}}),r}),e.def("App/View/Js/app/misc/custom.js",function(e,t,r,n){var s=window.location.pathname;if(window.sr=ScrollReveal({origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:1,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0}),sr.reveal(".hero-text > *",{delay:200},50),sr.reveal(".partner-image",100),sr.reveal(".stats",{beforeReveal:function(){$(".stat-num").each(function(e,t){i($(t))}),$(".stat .path").addClass("animated")}}),sr.reveal(".news-article-headline > *",100),"/"===s&&($(".map-marker-indicator").click(function(){$(this).parent().addClass("is-open"),$(".overlay").addClass("show"),$(".map-marker-indicator").css("pointer-events","none"),$(document).keydown(function(e){27==e.keyCode&&($(".map-marker").removeClass("is-open"),$(".overlay").removeClass("show"),$(".map-marker-indicator").css("pointer-events","visible"))})}),$(".map-marker .close").click(function(){$(".map-marker").removeClass("is-open"),$(".overlay").removeClass("show"),$(".map-marker-indicator").css("pointer-events","visible")})),$(".subscribe-btn").click(function(e){e.preventDefault(),$("section.subscribe").addClass("show-subscribe"),$(document).keydown(function(e){27==e.keyCode&&$(".filter").parent().removeClass("show-subscribe")})}),$(".filter").click(function(){$(this).parent().removeClass("show-subscribe")}),$(function(){$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},700),!1}})}),$(".burger").click(function(){$(this).toggleClass("show")}),$(".show > a").click(function(){$(".burger").removeClass("show")}),"/"===s)var i=function(e){var t=Math.abs(parseInt(e.text())),r=0,n=t/50;setInterval(function(){if(e.text(parseInt(r+=n)),r>t)return void e.text(parseInt(t))},40)};return"/legal"!==s&&"/imprint"!==s&&"/terms"!==s&&"/privacy"!==s||function(){var e=$(".legal p").contents().filter(function(){return 3==this.nodeType}).first(),t=e.text().trim(),r=t.slice(0,1);e.length&&(e[0].nodeValue=t.slice(r.length),e.before("<p class=dropcap>"+r+"</p>"))}(),$(function(){$("#f_vrfirst_interest").bind("change",function(){"developer"==$(this).val()?$("#vrfirst-lablist").show():$("#vrfirst-lablist").hide()})}),r}),e.def("App/View/Js/vendors/exoskeleton/exoskeleton.js",function(e,t,r,n){return function(r,n){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,t,s){r.Backbone=r.Exoskeleton=n(r,s,e,t)});else if(void 0!==t){var s,i;try{s=e("underscore")}catch(e){}try{i=e("jquery")}catch(e){}n(r,t,s,i)}else r.Backbone=r.Exoskeleton=n(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(this,function(e,t,r,n){"use strict";var s=e.Backbone,i=e.Exoskeleton,o=t.utils=r=r||{};t.$=n;var a=[],l=a.push,c=a.slice,u={}.toString;t.noConflict=function(){return e.Backbone=s,e.Exoskeleton=i,this},t.extend=function(e,t){var n,s=this;n=e&&hasOwnProperty.call(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},r.extend(n,s,t);var i=function(){this.constructor=n};return i.prototype=s.prototype,n.prototype=new i,e&&r.extend(n.prototype,e),n.__super__=s.prototype,n};var h=function(){throw new Error('A "url" property or function must be specified')},d=function(e,t){var r=t.error;t.error=function(n){r&&r(e,n,t),e.trigger("error",e,n,t)}},p=function(e){return"function"==typeof r[e]};o.result=function(e,t){var r=e?e[t]:void 0;return"function"==typeof r?e[t]():r},o.defaults=function(e){return c.call(arguments,1).forEach(function(t){for(var r in t)void 0===e[r]&&(e[r]=t[r])}),e},o.extend=function(e){return c.call(arguments,1).forEach(function(t){for(var r in t)e[r]=t[r]}),e};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};o.escape=function(e){return null==e?"":String(e).replace(/[&<>"']/g,function(e){return f[e]})},o.sortBy=function(e,t,r){var n="function"==typeof t?t:function(e){return e[t]};return e.map(function(e,t,s){return{value:e,index:t,criteria:n.call(r,e,t,s)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}).map(function(e){return e.value})};var m=0;o.uniqueId=function(e){var t=++m+"";return e?e+t:t};var v=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var s=u.call(e);if(s!=u.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!==+e?t!==+t:0===e?1/e==1/t:e===+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==e)return n[i]==t;var o=e.constructor,a=t.constructor;if(o!==a&&!("function"==typeof o&&o instanceof o&&"function"==typeof a&&a instanceof a))return!1;r.push(e),n.push(t);var l=0,c=!0;if("[object Array]"===s){if(l=e.length,c=l===t.length)for(;l--&&(c=v(e[l],t[l],r,n)););}else{for(var h in e)if(hasOwnProperty.call(e,h)&&(l++,!(c=hasOwnProperty.call(t,h)&&v(e[h],t[h],r,n))))break;if(c){for(h in t)if(hasOwnProperty.call(t,h)&&!l--)break;c=!l}}return r.pop(),n.pop(),c};o.isEqual=function(e,t){return v(e,t,[],[])},o.matchesSelector=function(){if("undefined"!=typeof document){var e,t="MatchesSelector",r=document.createElement("div");if(["matches","webkit"+t,"moz"+t,"ms"+t].some(function(t){var n=t in r;return e=t,n}),!e)throw new Error("Element#matches is not supported");return function(t,r){return t[e](r)}}}(),o.delegate=function(e,t,r,n){if("function"==typeof r&&(n=r,r=null),"function"!=typeof n)throw new TypeError("View#delegate expects callback function");var s=e.el,i=n.bind(e),a=r?function(e){for(var t=e.target;t&&t!==s;t=t.parentNode)if(o.matchesSelector(t,r))return e.delegateTarget=t,i(e)}:i;return s.addEventListener(t,a,!1),e._handlers.push({eventName:t,selector:r,callback:n,handler:a}),a},o.undelegate=function(e,t,r,n){"function"==typeof r&&(n=r,r=null);var s=e._handlers,i=function(t){e.el.removeEventListener(t.eventName,t.handler,!1)};t||r||n?s.filter(function(e){return!(e.eventName!==t||n&&e.callback!==n||r&&e.selector!==r)}).forEach(function(e){i(e),s.splice(s.indexOf(e),1)}):(s.forEach(i),e._handlers=[])},o.ajax=function(){var e=/^(?:application|text)\/xml/,r=/^application\/json/,n=function(t,n){return null==t&&(t=n.getResponseHeader("content-type")),e.test(t)?n.responseXML:r.test(t)?JSON.parse(n.responseText):n.responseText},s=function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status&&"file:"===window.location.protocol},i=function(e,t,r){return function(){if(4===e.readyState){var i=e.status,o=n(t.headers&&t.headers.Accept,e);if(s(e))t.success&&t.success(o),r&&r.resolve(o);else{var a=new Error("Server responded with a status of "+i);t.error&&t.error(e,i,a),r&&r.reject(e)}}}};return function(e){if(null==e)throw new Error("You must provide options");null==e.type&&(e.type="GET");var r=new XMLHttpRequest,n=t.Deferred&&t.Deferred();if(e.contentType&&(null==e.headers&&(e.headers={}),e.headers["Content-Type"]=e.contentType),"GET"===e.type&&"object"==typeof e.data){var s="";for(var o in e.data)s+=function(e,t){return null==t?"":"&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}(o,e.data[o]);if(s){var a=-1===e.url.indexOf("?")?"?":"&";e.url+=a+s.substring(1)}}e.credentials&&(e.withCredentials=!0),r.addEventListener("readystatechange",i(r,e,n)),r.open(e.type,e.url,!0);var l="*/".concat("*"),c={"*":l,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};if(r.setRequestHeader("Accept",e.dataType&&c[e.dataType]?c[e.dataType]+("*"!==e.dataType?", "+l+"; q=0.01":""):c["*"]),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.headers)for(var o in e.headers)r.setRequestHeader(o,e.headers[o]);return e.beforeSend&&e.beforeSend(r),r.send(e.data),n?n.promise:void 0}}();var g=t.Events={on:function(e,t,r){return b(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!b(this,"once",e,[t,r])||!t)return this;var n,s=this,i=function(){n||(n=!0,s.off(e,i),t.apply(this,arguments))};return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,s,i,o,a,l,c,u;if(!this._events||!b(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(o=e?[e]:Object.keys(this._events),a=0,l=o.length;a<l;a++)if(e=o[a],i=this._events[e]){if(this._events[e]=n=[],t||r)for(c=0,u=i.length;c<u;c++)s=i[c],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&n.push(s);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=c.call(arguments,1);if(!b(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&w(r,t),n&&w(n,arguments),this},stopListening:function(e,t,r){var n=this._listeningTo;if(!n)return this;var s=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);for(var i in n)e=n[i],e.off(t,r,this),!s&&Object.keys(e._events).length||delete this._listeningTo[i];return this}},y=/\s+/,b=function(e,t,r,n){if(!r)return!0;var s;if("object"==typeof r){for(var i in r)s=[i,r[i]],l.apply(s,n),e[t].apply(e,s);return!1}if(y.test(r)){for(var o=r.split(y),a=0,c=o.length;a<c;a++)s=[o[a]],l.apply(s,n),e[t].apply(e,s);return!1}return!0},w=function(e,t){var r,n=-1,s=e.length,i=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++n<s;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<s;)(r=e[n]).callback.call(r.ctx,i);return;case 2:for(;++n<s;)(r=e[n]).callback.call(r.ctx,i,o);return;case 3:for(;++n<s;)(r=e[n]).callback.call(r.ctx,i,o,a);return;default:for(;++n<s;)(r=e[n]).callback.apply(r.ctx,t)}},x={listenTo:"on",listenToOnce:"once"};Object.keys(x).forEach(function(e){var t=x[e];g[e]=function(e,n,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=r.uniqueId("l"))]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),g.bind=g.on,g.unbind=g.off;var $=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=r.uniqueId("c"),this.attributes=Object.create(null),t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=r.defaults({},n,r.result(this,"defaults")),this.set(n,t),this.changed=Object.create(null),this.initialize.apply(this,arguments)};if(r.extend($.prototype,g,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return r.extend(Object.create(null),this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var s,i,o,a,l,c,u,h;if(null==e)return this;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;o=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=r.extend(Object.create(null),this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(s in i)t=i[s],r.isEqual(h[s],t)||a.push(s),r.isEqual(u[s],t)?delete this.changed[s]:this.changed[s]=t,o?delete h[s]:h[s]=t;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;d<p;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!!Object.keys(this.changed).length:hasOwnProperty.call(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.extend(Object.create(null),this.changed);var t,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var i in e)r.isEqual(s[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.extend(Object.create(null),this._previousAttributes)},fetch:function(e){e=e?r.extend({},e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},d(this,e),this.sync("read",this,e)},save:function(e,t,n){var s,i,o,a=this.attributes;if(null==e||"object"==typeof e?(s=e,n=t):(s={})[e]=t,n=r.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=r.extend(Object.create(null),a,s)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);if(n.wait&&(t=r.extend(s||{},t)),t&&"object"==typeof t&&!l.set(t,n))return!1;c&&c(l,e,n),l.trigger("sync",l,e,n)},d(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=s),o=this.sync(i,this,n),s&&n.wait&&(this.attributes=a),o},destroy:function(e){e=e?r.extend({},e):{};var t=this,n=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&s(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;d(this,e);var i=this.sync("delete",this,e);return e.wait||s(),i},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||h();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},r.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend(Object.create(null),this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1)}}),r.keys){["keys","values","pairs","invert","pick","omit"].filter(p).forEach(function(e){$.prototype[e]=function(){var t=c.call(arguments);return t.unshift(this.attributes),r[e].apply(r,t)}})}var C=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},j={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1};if(r.extend(C.prototype,g,{model:void 0===$?null:$,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,k))},remove:function(e,t){var r=!Array.isArray(e);e=r?[e]:e.slice(),t||(t={});var n,s,i,o;for(n=0,s=e.length;n<s;n++)(o=e[n]=this.get(e[n]))&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o,t));return r?e[0]:e},set:function(e,t){t=r.defaults({},t,j),t.parse&&(e=this.parse(e,t));var n=!Array.isArray(e);e=n?e?[e]:[]:e.slice();var s,i,o,a,l,c,u,h=t.at,d=this.model,p=this.comparator&&null==h&&!1!==t.sort,f="string"==typeof this.comparator?this.comparator:null,m=[],v=[],g={},y=t.add,b=t.merge,w=t.remove,x=!(p||!y||!w)&&[];for(s=0,i=e.length;s<i;s++){if(l=e[s]||{},o=l instanceof $?a=l:l[d.prototype.idAttribute||"id"],c=this.get(o))w&&(g[c.cid]=!0),b&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),p&&!u&&c.hasChanged(f)&&(u=!0)),e[s]=c;else if(y){if(!(a=e[s]=this._prepareModel(l,t)))continue;m.push(a),this._addReference(a,t)}a=c||a,!x||!a.isNew()&&g[a.id]||x.push(a),g[a.id]=!0}if(w){for(s=0,i=this.length;s<i;++s)g[(a=this.models[s]).cid]||v.push(a);v.length&&this.remove(v,t)}if(m.length||x&&x.length)if(p&&(u=!0),this.length+=m.length,null!=h)for(s=0,i=m.length;s<i;s++)this.models.splice(h+s,0,m[s]);else{
x&&(this.models.length=0);var C=x||m;for(s=0,i=C.length;s<i;s++)this.models.push(C[s])}if(u&&this.sort({silent:!0}),!t.silent){for(s=0,i=m.length;s<i;s++)(a=m[s]).trigger("add",a,this,t);(u||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return c.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return e&&Object.keys(e).length?this[t?"find":"filter"](function(t){for(var r in e)if(e[r]!==t.get(r))return!1;return!0}):t?void 0:[]},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.models.map(function(t){return t.get(e)})},fetch:function(e){e=e?r.extend({},e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var s=e.reset?"reset":"set";n[s](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},d(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?r.extend({},t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,s=t.success;return t.success=function(e,r){t.wait&&n.add(e,t),s&&s(e,r,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId=Object.create(null)},_prepareModel:function(e,t){if(e instanceof $)return e;t=r.extend({},t),t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){("add"!==e&&"remove"!==e||r===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),p("each")){["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"].filter(p).forEach(function(e){C.prototype[e]=function(){var t=c.call(arguments);return t.unshift(this.models),r[e].apply(r,t)}});["groupBy","countBy","sortBy"].filter(p).forEach(function(e){C.prototype[e]=function(t,n){var s="function"==typeof t?t:function(e){return e.get(t)};return r[e](this.models,s,n)}})}else["forEach","map","filter","some","every","reduce","reduceRight","indexOf","lastIndexOf"].forEach(function(e){C.prototype[e]=function(t,r){return this.models[e](t,r)}}),C.prototype.find=function(e,t){var r;return this.some(function(n,s,i){if(e.call(t,n,s,i))return r=n,!0}),r},["sortBy"].forEach(function(e){C.prototype[e]=function(t,n){var s="function"==typeof t?t:function(e){return e.get(t)};return r[e](this.models,s,n)}});var _=["model","collection","el","id","attributes","className","tagName","events"],A=t.View=function(e){this.cid=r.uniqueId("view"),e&&Object.keys(e).forEach(function(t){-1!==_.indexOf(t)&&(this[t]=e[t])},this),this._handlers=[],this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};r.extend(A.prototype,g,{useNative:!1,tagName:"div",$:function(e){return t.$&&!this.useNative?this.$el.find(e):this.findAll(e)},find:function(e){return this.el.querySelector(e)},findAll:function(e){return c.call(this.el.querySelectorAll(e))},initialize:function(){},render:function(){return this},remove:function(){var e;return t.$&&!this.useNative?this.$el.remove():(e=this.el.parentNode)&&e.removeChild(this.el),this.stopListening(),this},setElement:function(e,r){return t.$&&!this.useNative?(this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]):(this.el&&this.undelegateEvents(),this.el="string"==typeof e?document.querySelector(e):e),!1!==r&&this.delegateEvents(),this},delegateEvents:function(e,n){if(!e&&!(e=r.result(this,"events")))return this;n||this.undelegateEvents();for(var s in e){var i=e[s];"function"!=typeof i&&(i=this[e[s]]);var a=s.match(/^(\S+)\s*(.*)$/),l=a[1],c=a[2];t.$&&!this.useNative?(l+=".delegateEvents"+this.cid,i=i.bind(this),this.$el.on(l,c||null,i)):o.delegate(this,l,c,i)}return this},undelegateEvents:function(){return t.$&&!this.useNative?this.$el.off(".delegateEvents"+this.cid):o.undelegate(this),this},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"),!1);else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e.className=r.result(this,"className")),e.class&&(e.className=e.class);var t=document.createElement(r.result(this,"tagName"));for(var n in e)n in t?t[n]=e[n]:t.setAttribute(n,e[n]);this.setElement(t,!1)}}}),t.sync=function(e,n,s){s||(s={});var i=E[e],o={type:i,dataType:"json"};s.url||(o.url=r.result(n,"url")||h()),null!=s.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||n.toJSON(s))),"GET"!==o.type&&(o.processData=!1);var a=s.xhr=t.ajax(r.extend(o,s));return n.trigger("request",n,a,s),a};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=t.$?function(){return t.$.ajax.apply(t.$,arguments)}:o.ajax,t.$?t.Deferred=function(){return new t.$.Deferred}:"undefined"!=typeof Promise&&"function"==typeof Promise.all&&(t.Deferred=function(){var e,t;return{promise:new Promise(function(r,n){e=r,t=n}),resolve:e,reject:t}});var V=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=function(e){return!!e&&("object"==typeof e&&"[object RegExp]"===u.call(e))};r.extend(V.prototype,g,{initialize:function(){},route:function(e,r,n){M(e)||(e=this._routeToRegExp(e)),"function"==typeof r&&(n=r,r=""),n||(n=this[r]);var s=this;return t.history.route(e,function(i){var o=s._extractParameters(e,i);s.execute(n,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var e,t=Object.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return t?e:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return r.map(function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var J=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)};return J.started=!1,r.extend(J.prototype,g,{atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._wantsPushState||!this._wantsHashChange){e=decodeURI(this.location.pathname+this.location.search);var r=this.root.replace(/\/$/,"");e.indexOf(r)||(e=e.slice(r.length))}else e=this.getHash();return e.replace(/^[#\/]|\s+$/g,"")},start:function(e){if(J.started)throw new Error("Backbone.history has already been started");J.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState;var t=this.getFragment();this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=t;var n=this.location;if(this._wantsHashChange&&this._wantsPushState&&this.atRoot()&&n.hash&&(this.fragment=this.getHash().replace(/^[#\/]|\s+$/g,""),this.history.replaceState({},document.title,this.root+this.fragment)),!this.options.silent)return this.loadUrl()},stop:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),J.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){if(this.getFragment()===this.fragment)return!1;this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),this.handlers.some(function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!J.started)return!1;t&&!0!==t||(t={trigger:!!t});var r=this.root+(e=this.getFragment(e||""));if(e=e.replace(/[#].*$/,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==r&&(r=r.slice(0,-1)),this._wantsPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace)}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),["Model","Collection","Router","View","History"].forEach(function(e){var r=t[e];r&&(r.extend=t.extend)}),r.extend(t,g),J&&(t.history=new J),t}),r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/views/FormAbstract.js",function(e,t,r,n){var s="module:views/FormAbstract",i=e("jquery"),o=(e("App/View/Js/vendors/exoskeleton/exoskeleton.js"),e("underscore"),e("App/View/Js/app/views/WidgetAbstract.js"));return r.exports=o.extend({reCaptcha:{isEnabled:!1,obj:{},bindName:""},_initialize:function(){this.initReCaptchaUi()},initReCaptchaUi:function(){var e=i("[data-bind='"+this.reCaptcha.bindName+"']");this.reCaptcha.isEnabled&&e.length>0&&(this.$reCaptcha=e.find("[name='g-recaptcha-response']"),this.$reCaptchaRefresh=e.find("[data-bind='g-recaptcha-reload']"),this.$reCaptchaBoundingBox=e.find("[data-class='g-recaptcha']"),this.captchaInvalidError={name:"g-recaptcha-response",message:"Captcha is required"})},renderForm:function(){console.log(s+"::renderForm");var e=this,t=this.model.toJSON(),r=i("[data-bind='"+this.reCaptcha.bindName+"']");if(delete t["g-recaptcha-response"],!this.$el)throw new ReferenceError("bounding box node not found");if(this.$inputs={},i.each(t,function(t){if(e.$inputs[t]=e.$el.find("*[name="+t+"]"),!e.$inputs[t].length)throw new ReferenceError("*[name="+t+"] node not found"+e.getElFace(e.$el))}),this.$submitBtn=this.$el.find(".submitbutton"),!this.$submitBtn.length)throw new ReferenceError("submit button node not found"+this.getElFace(this.$el));if(this.$errorMsg=this.$el.find(".has-error"),!this.$errorMsg.length)throw new ReferenceError("error msg node not found"+this.getElFace(this.$el));this.reCaptcha.isEnabled&&(this.$reCaptcha.val(""),this.$reCaptchaBoundingBox.html(""),n.grecaptcha&&this.$reCaptchaBoundingBox.length>0&&(this.reCaptcha.obj=n.grecaptcha.render(this.$reCaptchaBoundingBox.get(0),{sitekey:this.$reCaptchaBoundingBox.data("sitekey"),theme:"light",tabindex:17,type:"image",callback:e.setCaptchaToModel.bind(e),"expired-callback":e.recaptchaExpired.bind(e)})),this.$inputs["g-recaptcha-response"]=r.find("[name='g-recaptcha-response']"))},handleSubmit:function(){},bindForm:function(){console.log(s+"::bindForm");var e=this;this.model.on("change",this.handleModelValid.bind(this)).on("invalid",this.handleModelInvalid.bind(this)).on("remote:valid",this.handleModelRemoteValid.bind(this)).on("remote:invalid",this.handleModelRemoteInvalid.bind(this)),this.$el.on("submit",this.handleSubmit.bind(this)),this.$submitBtn.attr("disabled","disabled"),i.each(this.$inputs,function(){i(this).on("focus",e.handleInputOnFocus.bind(e)).on("blur",e.handleInputOnBlur.bind(e)).on("input change",e.handlerInputOnChange.bind(e))}),this.reCaptcha.isEnabled&&this.$reCaptchaRefresh.on("click",this.reloadCaptcha.bind(this))},unbindForm:function(){var e=this;console.log(s+"::unbindForm"),this.model.off("change").off("invalid").off("remote:valid").off("remote:invalid");var t=this.model.defaults;delete t.csrftoken,this.model.set(t),i.each(t,function(t,r){var n=e.$el.find("*[name="+t+"]");if(n.length<1)return!0;n.is('input[type="checkbox"]')?n.attr("checked",r?"checked":r):n.is('input[type="radio"]')?(n.attr("checked",!1),n.filter('[value="'+r+'"]').attr("checked","checked")):n.val(r)}),i.each(this.$inputs,function(){i(this).off("focus").off("blur").off("input change")})},isValid:!0,syncModel:function(e){console.log(s+"::syncModel");var t={};i.each(this.$inputs,function(e,r){t[e]=r.is(":checkbox")?r.is(":checked")?"true":"false":r.val()}),t&&(t["model:state"]=65536*(1+n.Math.random()),this.model.set(t,{validate:!0,remoteErrors:e||[]}))},handleInputOnFocus:function(e){console.log(s+"::handleInputOnFocus"),i(e.target).addClass("visited").addClass("focused"),this.$errorMsg.hasClass("alert-success")&&(this.$errorMsg.addClass("alert-danger"),this.$errorMsg.removeClass("alert-success"),this.$errorMsg.toggleClass("is-hidden",!0),this.$errorMsg.html(""))},handleInputOnBlur:function(e){console.log(s+"::handleInputOnBlur"),i(e.target).removeClass("focused")},handlerInputOnChange:function(e){console.log(s+"::handlerInputOnChange"),this.syncModel()},handleOnKeydownDeferred:function(e){console.log(s+"::handleOnKeydownDeferred"),e.target.name&&!i(e.target).hasClass("invalid")&&this.model.validateRemotely(e.target.name,i(e.target).val())},resetFormState:function(){console.log(s+"::resetFormState"),this.isValid=!0,this.$errorMsg.empty(),this.$errorMsg.toggleClass("is-hidden",!0),this.$submitBtn.removeAttr("disabled"),i.each(this.$inputs,function(){i(this).removeClass("invalid"),i(this).val()&&i(this).addClass("valid")})},handleModelInvalid:function(){console.log(s+"::handleModelInvalid");var e=this,t=null,r=null,n=arguments[1];this.resetFormState(),n.length&&(this.isValid=!1,this.$submitBtn.attr("disabled","disabled"),i.each(n,function(){var n=arguments[1];t=t||n.message,e.$inputs[n.name]&&e.$inputs[n.name].hasClass("visited")&&(e.$inputs[n.name].removeClass("valid").addClass("invalid"),e.$inputs[n.name].hasClass("focused")&&(r=n.message))}),(t=r||t)&&this.$errorMsg.html(t).toggleClass("is-hidden",!1))},handleModelValid:function(){console.log(s+"::handleModelValid"),this.resetFormState()},handleModelRemoteInvalid:function(e,t){console.log(s+"::handleModelRemoteInvalid"),this.syncModel([{name:e,message:t}])},handleModelRemoteValid:function(){console.log(s+"::handleModelRemoteValid"),this.syncModel()},getElFace:function(e){var t=e instanceof i?(e.prop("id")?"#"+e.prop("id"):"")+(e.prop("className")?"."+e.prop("className"):""):"";return t?" on "+t:""},setCaptchaToModel:function(e){this.reCaptcha.isEnabled&&(this.model.set("g-recaptcha-response",e,{silent:!0}),this.$inputs["g-recaptcha-response"].val(e),this.syncModel())},recaptchaExpired:function(){this.reCaptcha.isEnabled&&(this.model.set("g-recaptcha-response","",{silent:!0}),this.syncModel())},reloadCaptcha:function(e){e&&e.preventDefault(),this.reCaptcha.isEnabled&&"disabled"!==this.$reCaptchaRefresh.attr("disabled")&&(this.$reCaptchaRefresh.attr("disabled","disabled"),n.grecaptcha&&this.$reCaptchaBoundingBox.length>0&&(this.model.set({"g-recaptcha-response":""},{silent:!0}),this.syncModel([this.captchaInvalidError]),this.$reCaptcha.val(""),this.$reCaptchaBoundingBox.html(""),n.grecaptcha.reset(this.reCaptcha.obj),this.$reCaptchaRefresh.removeAttr("disabled")))}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("underscore",function(e,t,r,n){return r.exports=n._,r}),e.def("App/View/Js/app/models/AbstractForm.js",function(e,t,r,n){var s=e("App/View/Js/app/models/AbstractModel.js");return r.exports=s.extend({isEmailValid:function(e,t,r){var n=/^[a-zA-Z0-9\!\#\$\%\&\'\*\+\-\/\=\?\^\_\`\{\|\}\~\.]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,4}$/g;return r&&e.length<1?t.push({name:"email",message:"Email address is required."}):e.length>0&&!n.test(e)&&t.push({name:"email",message:"Email address is not valid."}),t},isNameValid:function(e,t,r){var n=/^[a-zA-Z\s]*$/;return r&&e.length<1?t.push({name:"name",message:"Name is required."}):e.length<3?t.push({name:"name",message:"Name must be at least 3 characters."}):e.length>50?t.push({name:"name",message:"Name must be max 50 characters."}):n.test(e)||t.push({name:"name",message:"Name is not valid."}),t},isOrganisationValid:function(e,t,r){var n=/^[a-zA-Z0-9\ \-]+$/;return r&&e.length<1?t.push({name:"organisation",message:"Organization is required."}):e.length>=1&&!n.test(e)?t.push({name:"organisation",message:"Organization is not valid."}):e.length>100&&t.push({name:"organisation",message:"Organization name is too long."}),t},isCsrfTokenValid:function(e,t){var r=/^[a-z0-9]+_[a-z0-9]+$/;return t.length>0?t:(e.length<1?t.push({name:"csrf-token",message:"Security token was missed"}):r.test(e)||t.push({name:"csrf-token",message:"Security token is not valid. Please reload the page"}),t)}}),r}),e.def("App/View/Js/app/views/WidgetAbstract.js",function(e,t,r,n){var s=(e("jquery"),e("App/View/Js/vendors/exoskeleton/exoskeleton.js"));return r.exports=s.View.extend({initialize:function(){this.$el&&this.$el.length?this._initialize&&this._initialize.apply(this,arguments):this.remove()}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),e.def("App/View/Js/app/models/AbstractModel.js",function(e,t,r,n){"use strict";var s=(e("jquery"),e("App/View/Js/vendors/exoskeleton/exoskeleton.js"));return r.exports=s.Model.extend({moduleName:"Model/AbstractModel",initialize:function(){this._url&&(this.url="/"+this._url)}}),r}),e.def("jquery",function(e,t,r,n){return r.exports=n.jQuery,r}),function(){e("App/View/Js/app/App.js")}()}();